<!doctype html>
<html>
  <head>
    <title>Dashing</title>
    <meta charset="UTF-8" />
    <link
      href="https://fonts.googleapis.com/css?family=JetBrains Mono"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"
      integrity="sha384-Akqfrbj/HpNVo8k11SXBb6TlBWmXXlYQrCSqEWmyKJe+hDm3Z/B2WVG4smwBkRVm"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.14"></script>
  </head>

  <body>
    <header class="rounded-area" id="top">
      <a
        href="/"
        id="home"
        hx-trigger="click"
        hx-select="main"
        hx-target="main"
        hx-boost="true"
        hx-swap="outerHTML"
      >
        <h1 id="server-name" hx-boost="false">{{ server_name }}</h1>
      </a>
      <a
        href="/settings"
        id="settings"
        hx-trigger="click"
        hx-select="main"
        hx-target="main"
        hx-boost="true"
        hx-swap="outerHTML"
      >
        <img src="/assets/settings.svg" hx-boost="false" />
      </a>
    </header>
    <main id="main">
      {% if is_home_route %}
      <section
        class="rounded-area"
        id="utils-section"
        hx-trigger="load"
        hx-get="/utils"
        hx-swap="innerHTML"
      >
        <p>Loading...</p>
      </section>
      <section
        class="rounded-area"
        id="useful-links"
        hx-trigger="load"
        hx-get="/links"
        hx-swap="innerHTML"
      >
        <p>Loading...</p>
      </section>
      {% else %}
      <section class="rounded-area settings">
        <form hx-post="/settings-post" class="settings-form" hx-ext="debug">
          <ul id="sections-area" _="init set $itemIndex to 0">
            {% for section in sections %} {% include "settings-section.html" %}
            {% endfor %}
          </ul>
          <div id="button-area">
            <button
              type="button"
              class="settings-button"
              hx-get="/htmx/settings-section"
              hx-swap="beforeend"
              hx-target="#sections-area"
            >
              Add section
            </button>
            <button type="submit" class="settings-button" id="settings-ok">
              Ok
            </button>
          </div>
        </form>
      </section>
      {% endif %}
    </main>
    <footer>acmota2 Â© 2025</footer>
  </body>

  <style>
    {% include "style.css" %}

    {% include "settings.css" %}
  </style>
</html>
